---
title: 《http权威指南》笔记
date: 2025-02-02 20:30
categories: 技术
tags: HTTP 前端
toc: true
---

在比较HTTP版本时，每个数字都必须单独进行比较，以便确定哪个版本更高。比如，HTTP/2.22就比HTTP/2.3的版本要高，因为22比3大。

HEAD方法与GET方法的行为很类似，但服务器在响应中只返回首部。不会返回实体的主体部分。这就允许客户端在未获取实际资源的情况下，对资源的首部进行检查。使用HEAD，可以：· 在不获取资源的情况下了解资源的情况（比如，判断其类型）；· 通过查看响应中的状态码，看看某个对象是否存在；· 通过查看首部，测试资源是否被修改了。

OPTIONS方法请求Web服务器告知其支持的各种功能。可以询问服务器通常支持哪些方法，或者对某些特殊资源支持哪些方法。（有些服务器可能只支持对一些特殊类型的对象使用特定的操作）。

DELETE方法所做的事情就是请服务器删除请求URL所指定的资源。但是，客户端应用程序无法保证删除操作一定会被执行。因为HTTP规范允许服务器在不通知客户端的情况下撤销请求。

 <源IP地址、源端口号、目的IP地址、目的端口号>这4个值一起唯一地定义了一条连接。

TCP慢启动限制了一个TCP端点在任意时刻可以传输的分组数。简单来说，每成功接收一个分组，发送端就有了发送另外两个分组的权限。如果某个HTTP事务有大量数据要发送，是不能一次将所有分组都发送出去的。必须发送一个分组，等待确认；然后可以发送两个分组，每个分组都必须被确认，这样就可以发送四个分组了，以此类推。这种方式被称为“打开拥塞窗口”。

客户端在图4-15d中收到了回送的响应报文时，会立即转向下一条请求，在keep-alive连接上向代理发送另一条请求（参见图4-15e）。而代理并不认为同一条连接上会有其他请求到来，请求被忽略，浏览器就在这里转圈，不会有任何进展了。

代理连接的是两个或多个使用相同协议的应用程序，而网关连接的则是两个或多个使用不同协议的端点。网关扮演的是“协议转换器”的角色，即使客户端和服务器使用的是不同的协议，客户端也可以通过它完成与服务器之间的事务处理。

客户端向Web服务器发送请求时，请求行中只包含部分URI（没有方案、主机或端口），如下例所示：GET /index.html HTTP/1.0User-Agent: SuperBrowser v1.3但当客户端向代理发送请求时，请求行中则包含完整的URI

通过HTTP OPTIONS方法，客户端（或代理）可以发现Web服务器或者其上某个特定资源所支持的功能（比如，它们所支持的方法）（参见图6-26）。通过使用OPTIONS，客户端可以在与服务器进行交互之前，确定服务器的能力，这样它就可以更方便地与具备不同特性的代理和服务器进行互操作了

如果HTTP/1.1缓存或服务器收到的请求既带有If-Modified-Since，又带有实体标签条件首部，那么只有这两个条件都满足时，才能返回304 Not Modified响应。

标识为no-cache的响应实际上是可以存储在本地缓存区中的。只是在与原始服务器进行新鲜度再验证之前，缓存不能将其提供给客户端使用。这个首部使用do-not-serve-from-cache-without-revalidation这个名字会更恰当一些。

不推荐使用Expires首部，它指定的是实际的过期日期而不是秒数。HTTP设计者后来认为，由于很多服务器的时钟都不同步，或者不正确，所以最好还是用剩余秒数，而不是绝对时间来表示过期时间。

<META HTTP-EQUIV>标签并不是控制文档缓存特性的好方法。通过配置正确的服务器发出HTTP首部，是传送文档缓存控制请求的唯一可靠的方法。

为了降低对隧道的滥用，网关应该只为特定的知名端口，比如HTTPS的端口443，打开隧道。

很多大规模的爬虫产品，比如因特网搜索引擎使用的那些爬虫，都为用户提供了向根集中提交新页面或无名页面的方式。

使用持久连接时可以没有Content-Length首部，即采用分块编码（chunked encoding）时。在分块编码的情况下，数据是分为一系列的块来发送的，每块都有大小说明。哪怕服务器在生成首部的时候不知道整个实体的大小（通常是因为实体是动态生成的），仍然可以使用分块编码传输若干已知大小的块。

为了和使用HTTP/1.0的应用程序兼容，任何带有实体主体的HTTP/1.1请求都必须带有正确的Content-Length首部字段

Content-Type首部还支持可选的参数来进一步说明内容的类型。charset（字符集）参数就是个例子，它说明把实体中的比特转换为文本文件中的字符的方法：

为了避免服务器使用客户端不支持的编码方式，客户端就把自己支持的内容编码方式列表放在请求的Accept-Encoding首部里发出去。如果HTTP请求中没有包含Accept-Encoding首部，服务器就可以假设客户端能够接受任何编码方式（等价于发送Accept-Encoding:＊）。

客户端可以给每种编码附带Q（质量）值参数来说明编码的优先级。Q值的范围从0.0到1.0,0.0说明客户端不想接受所说明的编码，1.0则表明最希望使用的编码。“＊”表示“任何其他方法”。

若客户端和服务器之间不是持久连接，客户端就不需要知道它正在读取的主体的长度，而只需要读到服务器关闭主体连接为止。当使用持久连接时，在服务器写主体之前，必须知道它的大小并在Content-Length首部中发送。如果服务器动态创建内容，就可能在发送之前无法知道主体的长度。分块编码为这种困难提供了解决方案，只要允许服务器把主体逐块发送，说明每块的大小就可以了。

服务器可以用大小为0的块作为主体结束的信号，这样就可以继续保持连接，为下一个响应做准备。

Last-Modified和ETag是HTTP使用的两种主要验证码。

字符集是把字符转换为二进制码的编码

国际化字符系统的关键目标是把语义（字母）和表示（图形化的显示形式）隔离开来。HTTP只关心字符数据和相关语言及字符集标签的传输。字符形状的显示是由用户的图形显示软件（包括浏览器、操作系统、字体等）完成的

注意，没有Content-Charset这样的响应首部和Accept-Charset请求首部匹配。为了和MIME标准兼容，响应的字符集是由服务器通过Content-Type响应首部的charset参数带回来的。不对称真是太糟了，不过需要的信息倒是都有了。

所有的标记都是不区分大小写的，也就是说，标记en和eN是等价的。但是，习惯上用全小写来表示一般的语言，而用全大写来表示特定的国家。例如，fr表示所有分类为法语的语言，而FR表示国家法国[插图]。

DNS允许将几个IP地址关联到一个域中，可以配置DNS解析程序，或对其进行编程，以返回可变的IP地址。解析程序返回IP地址时所基于的原则可以很简单（轮转），也可以很复杂（比如查看几台服务器上的负载，并返回负载最轻的服务器的IP地址）。

大多数DNS客户端只会使用多地址集中的第一个地址。为了均衡负载，大多数DNS服务器都会在每次完成查询之后对地址进行轮转。这种地址轮转通常称作DNS轮转。